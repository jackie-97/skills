本文档主要写一个 cocos 的项目开发计划

## 关注点

项目计划

- [ ] 恐龙跑酷
- [ ] 飞机大战
  - [CocosCreator3.8 入门教程-微信飞机大战 ｜ 微信小游戏 ｜ 2D 游戏开发 ｜ 游戏制作 ｜ 独立游戏开发 ｜ cocos ｜ 游戏引擎 ｜ typescript ｜ ts\_哔哩哔哩\_bilibili](https://www.bilibili.com/video/BV1csHseJETT/?spm_id_from = 333.788.recommend_more_video.1&vd_source = 522153461914a766fc002cc8619314e4)
- [ ] 坦克大战
- [ ] cocos 插件：补一个白色的，傻逼玩意

  - 定价 10 块、15

- [ ] 贪吃蛇
- [ ] 消消乐
  - [cocos 实现消消乐小游戏上一篇学习了两天入门 cocos 开发飞机大作战，接下来进阶实现一个消消乐游戏，相比飞机大作战来说 - 掘金 (juejin.cn)](https://juejin.cn/post/7289718324857716793#heading-42)
- [ ] 切水果
- [ ] 死亡空间
  - [[Cocos Creator 游戏开发教学\]Steam 游戏《Cramped Room Of Death》复刻教程（已完结）\_哔哩哔哩 bilibili](https://www.bilibili.com/video/BV1JL4y1M7Y4/?spm_id_from = 333.337.search-card.all.click&vd_source = 522153461914a766fc002cc8619314e4)
- [ ] 山地越野
- [ ] 超级玛丽
- [ ] 冰与火游戏
- [ ] 黑洞大作战
- [ ] 合成西瓜
- [ ] 魂斗罗
- [ ] 跑酷
- [ ] 保卫萝卜
- [ ] 城市天际线
- [ ] 植物大战僵尸
- [ ] 胡闹厨房
- [ ] 火柴人大战

## 技巧

有些鼠标的左侧可以完成前进后退功能



## 飞机大战

#### 游戏策划

- 主角通过发射炸弹击倒敌人
- 可以全屏幕的控制
- 地图随机生成奖品，通过接触来获取

  - 有大炮和全图炸弹

- 有计分
-

#### 计划

：6 天，于 9 月 11 号开始的，我要一鸣惊人

9 月 11 日：项目启动和环境搭建

- 阅读策划案，确保理解游戏设计和目标。
- 搭建开发环境，包括安装 Cocos Creator 和配置开发工具。
- 导入策划案中的所有游戏素材，包括图像、音效和音乐。
- 设计游戏的基本架构，包括游戏循环、得分系统、敌人生成逻辑等。
- 创建游戏的基本框架代码，包括初始化场景和配置。

9 月 12 日：核心游戏逻辑开发

- 开发飞机控制逻辑，实现移动、射击和加速功能。
- 实现敌人的生成逻辑，包括不同类型的敌人和行为模式。
- 实现子弹和敌人的碰撞检测，处理碰撞后的效果。
- 开发得分系统，包括击中敌人后的得分计算和显示。

9 月 13 日：游戏界面和用户界面开发

- 设计和实现游戏的用户界面（UI），包括得分板、生命值显示等。
- 开发游戏的开始界面、游戏界面和结束界面。
- 实现游戏的暂停和恢复功能。
- 添加游戏音效和背景音乐，确保它们与游戏事件同步。

9 月 14 日：游戏测试和优化

- 进行全面的游戏测试，包括功能测试、性能测试和用户体验测试。
- 记录并修复发现的问题，优化游戏性能。
- 调整游戏难度和平衡性，确保游戏的可玩性和挑战性。
- 准备游戏的发布版本，包括打包和压缩资源。

9 月 15 日：发布和后续工作

- 进行游戏的最终测试，确保没有遗漏的问题。
- 发布游戏到选定的平台，如应用商店或游戏网站。
- 监控玩家反馈，收集用户意见。
- 准备后续的更新计划，包括可能的新功能和修复补丁。
- 总结项目经验，记录成功点和需要改进的地方。

#### 实施

我要多做减法，比如飞机他们除了 3 钟，那我就先做 1 种

明确目标，重整体，不重细节

- 不要再想昨天一样搞了半天的动画

每天晚上预留时间来修复 bug

- 而不是大白天就在弄

发现操作越来越变形了，不知道是不是因为自己不懂得休息的原因

- 注意力疯狂下降，瞎搞东西

写方法还是修改属性？

- 简单的就修改属性
- 复杂的，需要做额外的事情的，就写方法

时序的问题，可以考虑延迟操作

- 比如子弹碰撞到，马上销毁子弹会有冲突报错，那可以选择延迟销毁

游戏管理器

- 存放什么东西？

  - 游戏状态：比如游戏开始、暂停、游戏进度

  - 游戏设置：音乐、音效、难度

  - 玩家状态：血量、等级、昵称

- 如何创建？

  - 通过常驻节点
  - 需要时动态创建节点，然后再导入场景

实操与看教程不能脱节的太远，不然没法同步了

-

警告不碍事，错误则是一定要解决的

-

功能实现有多种方式

- 代码
- 拖拽

控制与显示分离的实现方式，以分数的控制、显示举例

- 控制：只负责数据的处理，不关心数据如何被显示
- 显示：只负责显示，不负责控制
- 分离方式
  - 回调
  - 事件机制
  - 观察者

我不太理解怎么算耦合，怎么算分离了

- 我理解的分离就是定义与调用分离，A 处定义，但是由 B 处来调用

绑定方法

- 节点》组件》方法

暂停有几种实现方式

- cc.director.pause()：重量级，音乐、动画全停了
- cc.director.getScheduler().setTimeScale(0)：轻量，部分暂停
- 角色暂停
  - 把角色禁用：active 为 false

渲染更新不仅仅依赖于 update 方法

- 其他也会触发渲染更新，比如触摸事件

不要老是想着全局禁用，比如全局禁用事件响应

- 你这样容易误杀，做不到精细控制

新页面是通过同一场景新建节点还是新建场景

- 简单场景：新建节点
- 复杂场景：新建一个场景

有些操作不是马上调用的

- 比如结算页面是需要在死亡动画播放完后才显示的

gameMgr 节点

- 每个场景都要一个吗？
  - 需要共享游戏数据：则是全局一个即可
- 怎样保证这个节点不会被销毁
  - 通过 node.persistent = true

声音分 2 种，音效与音频

- 音效：短时间播放的，如打击声
- 音频：则是长时间的，如 bgm

cocos 有些赋值不是通过代码来完成的，而是通过拖拽完成

- 比如音频的赋值

cocos 是怎么判断一个节点位置的？通过锚点还是左下角？

- 是锚点，锚点位置

编辑器怎么隐藏节点及其子节点？

- 名字旁边，有个勾号

如果设置二维世界坐标

为啥视角之外还能监听到我的触摸事件？

- 自己在代码里加点东西，比如坐标小于 0，或者是大于屏幕宽度 480，就直接返回了

为啥会我鼠标停留点跟角色位置有偏移？左下角准确，右上角偏移最大

- 是因为缩放的问题，如果是缩放为 100%就能准确

cocos 种 location 与 position 对象有啥区别，举例

- position 是跟 parent 有关的，是本地坐标系
- location 则是世界坐标系

子弹发射功能实现

- 创建节点
- 加到场景中
- 通过 update 移动
- 跑出屏幕外，则是销毁节点

有预制体就不需要在层级管理中创建节点了

- 而是通过动态创建节点的方式

要分清楚是要全局事件还是节点事件

- 比如我希望是按住角色才能移动，而不是任意都可以移动

一般的预制体克隆来生成节点，都是放在 gameManager

- 除非是由强关联的

敌机

- 敌机生成
- 碰撞检测
- 销毁与销毁动画
- 音效

敌机生成了看不见

- 可能是层级的问题，它层级在下面的，要比上面的优先级高
- 地图不能放到下面

一般是在指定父节点后在设置自己的 position

-

可以没有刚体，只有碰撞体，也可以只有刚体，没有碰撞体

- 前者没有重力，也不响应力
  - 但是 box2d 没有刚体，就无法开启碰撞监听
- 后者则是没有碰撞回调
- 刚体和碰撞体都有组的概念，都可以

刚体、碰撞体对比

- 刚体只负责物理行为
- 碰撞体自定义形状，负责碰撞的检测
- 刚体
  - 一般设置为碰的动的动态刚体
  - 碰不动的胖子则是设置为运动刚体
- 碰撞体
  - 如果碰撞双方其中一个不开启碰撞监听，还是可以发生碰撞的，
    - 只是不开启的那个没有碰撞监听

buildin 物理系统与 box2d 类型的物理系统区别

- 在 buildin 只有碰撞检测功能，刚体在 buildin 中无效
- 分组
  - 如果刚体与碰撞体分组不同，那么是听碰撞体分组的

为啥一开始动画就播放了？

- 我都没设置加载后直接播放

没法预览动画效果啊

- 双击居然让我选择应用程序

为啥碰撞检测失效了？

- 刚体没有开启碰撞检测
- 要么就是 group 搞错了

对于异步操作

- 你想要等操作完成后再执行一些动作，则是可以考虑用事件监听

那引用

- 可以是拖拽式
- 也可以通过静态方法，比如 gameMgr

记分方式

- 应该是在敌机销毁时，而不是由子弹来计分
-

组件可以依赖于另一个组件

- 被依赖的组件如何赋值？

多 canvas？

- 性能优化，减少重绘，
- 一个主，多个副，经常变动的放在副
-

分层？

- 方便控制上下显示
- 渲染层级：只勾选哪些，不勾选哪些。。。

变形工具为啥只能拖放位置

- label 组件需要设置溢出大小为 clamp 才能变形

- 带上 widget 组件

怎么去做方法调用？

- 通过触发事件
  - 在 gameMgr 上触发事件，在 scoreUI 上给 gameMgr 节点注册事件，绑定回调，指定 this
- 直接调用方法

空指针问题

- 编辑器可能是不小心改了文件名，然后没同步，这是你看一下脚本，看是否需要重新赋值
- this 指向问题，你需要给 this 只想为正确的值，不要遗漏了步骤

角色、物品不显示的问题

- 层级错了，你要把它放在地图上层，也就是图层管理器的下面

#### bug

适配出现问题

- 看下移动是使用本地坐标，还是世界坐标，还是 ui 坐标

解决方案：

